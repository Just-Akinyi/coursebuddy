2Build the Quiz and Project Screens (student view)

2Then: Course completion logic (auto or admin-set)

2Then: Parent Dashboard logic (child status, alerts)



// Notifications Management

// In-app (Flutter FCM setup with firebase_messaging)‚Äìforeground/background listeners.

// FCM tokens already stored in /fcmTokens/{uid}.

// Cloud Function or Admin-triggered to send notifications to specific uids/devices.

// Parent notifications for session-based updates and quiz pass/fail using Cloud Functions with FCM.

// Cloud Functions Needed

// onMaterialSent ‚Üí send FCM to student(s)/parent(s).

// onSessionComplete ‚Üí decrement remaining classes, notify parent.

// onQuizResult ‚Üí update Firestore + notify parent (pass/fail).

// 
// ****
// üîÅ Next
//
// Let me know if you also want to:

// Add file opening via url_launcher

// Filter by sessionNumber

// Support tabs for Materials, Quizzes, Projects



Pick one of the following to implement now:

‚úÖ Upload & send material UI or

‚öôÔ∏è Cloud Function notification logic
Let me know when you're ready for:

‚úÖ PDF reports

‚úÖ Push to parent on "material sent"

‚úÖ Or building the next tab for Admin dashboard

models/course.dart
class Course {
  final String id;
  final String title;
  final List<String> materials;

  Course({required this.id, required this.title, required this.materials});
}
// class Course {
//   final String id;
//   final String title;
  final String imageUrl;
//   final List<Session> sessions;

//   Course({required this.id, required this.title, required this.sessions});
required this.imageUrl, should not be a must instead put default incase not uploaded
//   factory Course.fromMap(String id, Map<String, dynamic> data) {
//     final rawSessions = List<Map<String, dynamic>>.from(data['sessions'] ?? []);
//     return Course(
//       id: id,
//       title: data['title'] ?? 'Untitled',
//       sessions: rawSessions.map((e) => Session.fromMap(e)).toList(),
//     );
//   }
// }

// class Session {
//   final String name;
//   final MaterialContent materials;

//   Session({required this.name, required this.materials});

//   factory Session.fromMap(Map<String, dynamic> map) {
//     return Session(
//       name: map['name'] ?? 'Untitled Session',
//       materials: MaterialContent.fromMap(map['materials'] ?? {}),
//     );
//   }
// }

// class MaterialContent {
//   final String notes;
//   final String videos;
//   final String quizzes;
//   final String projects;

//   MaterialContent({
//     required this.notes,
//     required this.videos,
//     required this.quizzes,
//     required this.projects,
//   });

//   factory MaterialContent.fromMap(Map<String, dynamic> map) {
//     return MaterialContent(
//       notes: map['notes'] ?? '',
//       videos: map['videos'] ?? '',
//       quizzes: map['quizzes'] ?? '',
//       projects: map['projects'] ?? '',
//     );
//   }
// }
*********course_material.dart
// import 'package:flutter/material.dart';
// import '../models/course.dart';

// class CourseMaterialScreen extends StatelessWidget {
//   final Course course;

//   const CourseMaterialScreen({super.key, required this.course});

//   @override
//   Widget build(BuildContext context) {
//     return Scaffold(
//       appBar: AppBar(title: Text(course.title)),
//       body: course.sessions.isEmpty
//           ? const Center(child: Text('No sessions found.'))
//           : ListView.builder(
//               itemCount: course.sessions.length,
//               itemBuilder: (context, index) {
//                 final session = course.sessions[index];
//                 final materials = session.materials;

//                 return ExpansionTile(
//                   title: Text(session.name),
//                   leading: const Icon(Icons.menu_book),
//                   children: [
//                     ListTile(
//                       leading: const Icon(Icons.note),
//                       title: const Text("Notes"),
//                       subtitle: Text(materials.notes),
//                     ),
//                     ListTile(
//                       leading: const Icon(Icons.video_library),
//                       title: const Text("Videos"),
//                       subtitle: Text(materials.videos),
//                     ),
//                     ListTile(
//                       leading: const Icon(Icons.quiz),
//                       title: const Text("Quizzes"),
//                       subtitle: Text(materials.quizzes),
//                     ),
//                     ListTile(
//                       leading: const Icon(Icons.code),
//                       title: const Text("Projects"),
//                       subtitle: Text(materials.projects),
//                     ),
//                   ],
//                 );
//               },
//             ),
//     );
//   }
// }
NEEDS
-create one app bar for all screens
-create custom widget for items not found(error UI)
-Make one listTile make its attributes to be leadingicon,title, **subtitle
-actually subtitle not necessary instead click title to get into the actual MaterialContent
-but we can use description as subtitle
//  print("üìö Course materials: ${course.materials}");
//                 return ListTile(
//                   leading: const Icon(Icons.book),
//                   // leading: Text("üìö"),

import 'package:flutter/material.dart';
import '../models/course.dart';

class CourseMaterialScreen extends StatelessWidget {
  final Course course;

  const CourseMaterialScreen({super.key, required this.course});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(course.title)),
      body: course.materials.isEmpty
          ? const Center(child: Text('No materials found.'))
          : ListView.builder(
              itemCount: course.materials.length,
              itemBuilder: (context, index) {
                print("üìö Course materials: ${course.materials}");
                return ListTile(
                  leading: const Icon(Icons.book),
                  // leading: Text("üìö"),
                  title: Text(course.materials[index]),
                );
              },
            ),
    );
  }
}

// print("üìö Materials: ${course.materials}");
*******************HOME_SCREEN.dart
// import 'package:flutter/material.dart';
// import 'package:cloud_firestore/cloud_firestore.dart';
// import '../models/course.dart';
// import 'course_material_screen.dart';

// class HomeScreen extends StatelessWidget {
//   const HomeScreen({super.key});

//   @override
//   Widget build(BuildContext context) {
//     final coursesRef = FirebaseFirestore.instance.collection('courses');

//     return Scaffold(
//       appBar: AppBar(title: const Text('My Courses')),
//       body: StreamBuilder<QuerySnapshot>(
//         stream: coursesRef.snapshots(),
//         builder: (context, snapshot) {
//           if (snapshot.hasError) {
//             print("üî• Firestore error: \${snapshot.error}");
//             return Text('Error: \${snapshot.error}');
//           }

//           if (!snapshot.hasData) {
//             return const Center(child: CircularProgressIndicator());
//           }

//           final docs = snapshot.data!.docs;
 
              final course = Course(
                id: docs[index].id,
                title: docs[index].id,
                // title: data['title'] ?? 'Untitled',
                materials: List<String>.from(data['materials'] ?? []),

//           return ListView.builder(
//             itemCount: docs.length,
//             itemBuilder: (context, index) {
//               final data = docs[index].data() as Map<String, dynamic>;
//               final course = Course.fromMap(docs[index].id, data);
 return Card(
  margin: const EdgeInsets.symmetric(vertical: 8, horizontal: 16),
  shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
  elevation: 4,
  child: ListTile(
    contentPadding: const EdgeInsets.all(12),
    leading: ClipRRect(
      borderRadius: BorderRadius.circular(8),
      child: Image.network(course.imageUrl, width: 60, height: 60, fit: BoxFit.cover),
    ),
  title: Text(course.title),
                trailing: const Icon(Icons.arrow_forward),
                onTap: () {
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (_) => CourseMaterialScreen(course: course),
//               return ListTile(
//                 title: Text(course.title),
//                 trailing: const Icon(Icons.arrow_forward),
//                 onTap: () {
//                   Navigator.push(
//                     context,
//                     MaterialPageRoute(
//                       builder: (_) => CourseMaterialScreen(course: course),
//                     ),
//                   );
//                 },
//               );
//             },
//           );
//         },
//       ),
//     );
//   }
// }
NEEDS
-again one appbar for all with soft background color
-again that error UI aplies
-make a progress indicator widget cause it may need reuse

import 'package:flutter/material.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import '../models/course.dart';
import 'course_material_screen.dart';

class HomeScreen extends StatelessWidget {
  const HomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final coursesRef = FirebaseFirestore.instance.collection('courses');

    return Scaffold(
      appBar: AppBar(title: const Text('My Courses')),
      body: StreamBuilder<QuerySnapshot>(
        stream: coursesRef.snapshots(),
        builder: (context, snapshot) {
          // if (snapshot.hasError) return const Text('Something went wrong!');
          if (snapshot.hasError) {
            print("üî• Firestore error: ${snapshot.error}");
            return Text('Error: ${snapshot.error}');
          }

          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          final docs = snapshot.data!.docs;

          return ListView.builder(
            itemCount: docs.length,
            itemBuilder: (context, index) {
              final data = docs[index].data() as Map<String, dynamic>;
              final course = Course(
                id: docs[index].id,
                title: docs[index].id,
                // title: data['title'] ?? 'Untitled',
                materials: List<String>.from(data['materials'] ?? []),
              );

              return ListTile(
                title: Text(course.title),
                trailing: const Icon(Icons.arrow_forward),
                onTap: () {
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (_) => CourseMaterialScreen(course: course),
                    ),
                  );
                },
              );
            },
          );
        },
      ),
    );
  }
}


// üöÄ Tonight‚Äôs Phase 3 Plan
// 1. üé® Admin UI: "Add User" Screen
// Create a new screen under lib/screens/admin/add_user_screen.dart

// Form fields:

// Email

// Role (dropdown: student, teacher, parent)

// LinkedTo field (showable only if role is teacher or parent)

// Use the existing SharedButton as the submit button

// 2. ‚òÅÔ∏è Backend: Cloud Function Setup
// Initialize Firebase Functions (Node.js / TypeScript):

// firebase init functions

// Install firebase-admin

// Define a callable function createUser() that:

// Checks if the requesting user (via context.auth.uid) has role == 'admin' in Firestore

// Creates new Firebase Auth user via Admin SDK

// Writes users/{uid} and roles/{uid} documents

// Returns success or error

// 3. ‚úèÔ∏è Integrate Function in Flutter
// Use cloud_functions package to call the function from the Admin UI

// Handle success: show confirmation dialog, clear form

// Handle errors: use showError(...)

// ‚úÖ Summary Checklist Tonight
//  Create AddUserScreen UI

//  Initialize Firebase Functions

//  Implement createUser Cloud Function

//  Connect Flutter to function and test admin flow

//  Update Firestore security rules